<html>
<head>
<title>OIOSAML.java logging</title>
        <style type="text/css">
    	body {background-color: white; margin: 20px;}
    	body, tr, td {font-family: Verdana, Helvetica, sans-serif; color: #456974;}
    	div#pagecontainer {width: 80%;}
    	h1, h2, h3, h4 {color: #76c2bc; border-bottom: 1px solid #76c2bc;}
    	.monospace {font-family: monospace;}
    	legend {font-weight: bold;}
    	fieldset {margin-top: 10px; margin-bottom: 10px;}
    	span.emphasis {font-weight: bold;}
    </style>
</head>
<body>

<h1>Configuring AssuranceLevel</h1>
<p>
OIOSAML.Java can be configured with a required minimum assurance level, that the user must be signed in with. The IdP that authenticates the user must then issue a token that contains an assurance level attribute that is <em>at least</em> the level configured.
</p>

<p>
OIOSAML.java supports two different kinds of assurance levels, the "old" AssuranceLevel attribute, which holds the values 1, 2, 3 or 4, or the "new" NSIS-based levels, which holds the values Low, Substantial and High.
</p>

<p>
It is possible to configure a requirement for one or both of these attributes, but note that the issued assertion only has to pass one of the requirements if both are configured (e.g. if both NSIS level "High" and AssuranceLevel "4" are required, and the IdP issues a token with AssuranceLevel "4", then it passes validation).
</p>

<p>
The following two configuration settings are used to configure the required level.

<ul>
<li>oiosaml-sp.assurancelevel: To disable set it to 0.</li>
<li>oiosaml-sp.nsislevel: To disable leave it blank.</li>
</ul>

</p>

<p>
The following levels are allowed for these settings:

<pre>
oiosaml-sp.assurancelevel=0
oiosaml-sp.assurancelevel=1
oiosaml-sp.assurancelevel=2
oiosaml-sp.assurancelevel=3
oiosaml-sp.assurancelevel=4

oiosaml-sp.nsislevel=
oiosaml-sp.nsislevel=https://data.gov.dk/concept/core/nsis/loa/Low
oiosaml-sp.nsislevel=https://data.gov.dk/concept/core/nsis/loa/Substantial
oiosaml-sp.nsislevel=https://data.gov.dk/concept/core/nsis/loa/High
</pre>
</p>

<h2>Requesting a specific AssuranceLevel</h2>
<p>
The OIOSAML 3.0 profile allows for requesting a specific level of assurance in the AuthnRequest send by the SAML Service Provider to the SAML Identity
Provider. Not all Identity Providers supports this, so the feature is not enabled by default.
</p>

<p>
By setting the following configuration parameter, the OIOSAML.java framework will request the configured level as part of the AuthnRequest.
</p>

<pre>
oiosaml-sp.enable.authncontextclassref.request=true
</pre>

</body>
</html>
